<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Filtering Networks • RCy3</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Filtering Networks">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">RCy3</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.7.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Cancer-networks-and-data.html">Cancer networks and data</a>
    </li>
    <li>
      <a href="../articles/Custom-Graphics.html">Custom Graphics and Labels</a>
    </li>
    <li>
      <a href="../articles/Cytoscape-and-NDEx.html">Cytoscape and NDEx</a>
    </li>
    <li>
      <a href="../articles/Cytoscape-and-graphNEL.html">Cytoscape and graphNEL</a>
    </li>
    <li>
      <a href="../articles/Cytoscape-and-iGraph.html">Cytoscape and igraph</a>
    </li>
    <li>
      <a href="../articles/Filtering-Networks.html">Filtering Networks</a>
    </li>
    <li>
      <a href="../articles/Group-nodes.html">Group nodes</a>
    </li>
    <li>
      <a href="../articles/Identifier-mapping.html">Identifier mapping</a>
    </li>
    <li>
      <a href="../articles/Importing-data.html">Importing data</a>
    </li>
    <li>
      <a href="../articles/Network-functions-and-visualization.html">Network functions and visualization</a>
    </li>
    <li>
      <a href="../articles/Overview-of-RCy3.html">Overview of RCy3</a>
    </li>
    <li>
      <a href="../articles/Phylogenetic-trees.html">Phylogenetic-trees</a>
    </li>
    <li>
      <a href="../articles/Upgrading-existing-scripts.html">Upgrading existing scripts</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/cytoscape/RCy3">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Filtering Networks</h1>
                        <h4 class="author">Kristina Hanspers, Alexander Pico</h4>
            
            <h4 class="date">2020-02-27</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/cytoscape/RCy3/blob/master/vignettes/Filtering-Networks.Rmd"><code>vignettes/Filtering-Networks.Rmd</code></a></small>
      <div class="hidden name"><code>Filtering-Networks.Rmd</code></div>

    </div>

    
    
<p>This vignette will introduce you to some techniques for filtering a network based on node properties. You will learn to:</p>
<ol style="list-style-type: decimal">
<li>Select a set of nodes based on node degree and attribute filters</li>
<li>Create a subnetwork based on selected nodes</li>
<li>Hide a set of nodes based on filters</li>
</ol>
<p>For this tutorial, we will use data from the STRING database (<a href="https://string-db.org/" class="uri">https://string-db.org/</a>).</p>
<div id="installation" class="section level1">
<h1 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h1>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="cf">if</span>(<span class="op">!</span><span class="st">"RCy3"</span> <span class="op">%in%</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/utils/installed.packages.html">installed.packages</a></span>()){</a>
<a class="sourceLine" id="cb1-2" data-line-number="2">    <span class="kw"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"BiocManager"</span>)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3">    BiocManager<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/BiocManager/man/install.html">install</a></span>(<span class="st">"RCy3"</span>)</a>
<a class="sourceLine" id="cb1-4" data-line-number="4">}</a>
<a class="sourceLine" id="cb1-5" data-line-number="5"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(RCy3)</a></code></pre></div>
</div>
<div id="prerequisites" class="section level1">
<h1 class="hasAnchor">
<a href="#prerequisites" class="anchor"></a>Prerequisites</h1>
<p>In addition to this package (RCy3), you will need:</p>
<ul>
<li>
<strong>Cytoscape 3.7</strong> or greater, which can be downloaded from <a href="https://cytoscape.org/download.html" class="uri">https://cytoscape.org/download.html</a>. Simply follow the installation instructions on screen.</li>
<li>Complete installation wizard</li>
<li>Install the STRING app:</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw"><a href="../reference/installApp.html">installApp</a></span>(<span class="st">'STRINGapp'</span>)  </a></code></pre></div>
</div>
<div id="get-network-from-string" class="section level1">
<h1 class="hasAnchor">
<a href="#get-network-from-string" class="anchor"></a>Get network from STRING</h1>
<p>We are going to query the STRING Disease database for the term “breast cancer”. By default, the app pulls the top 100 human proteins associated with the disease along with edges having an evidence strength of 0.4 or greater:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">string.cmd =<span class="st"> 'string disease query disease="breast cancer"'</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="kw"><a href="../reference/commandsRun.html">commandsRun</a></span>(string.cmd)</a>
<a class="sourceLine" id="cb3-3" data-line-number="3">string.net&lt;-<span class="kw"><a href="../reference/getNetworkSuid.html">getNetworkSuid</a></span>()  <span class="co">#grab handle on network for future reference</span></a></code></pre></div>
</div>
<div id="filtering-by-degree" class="section level1">
<h1 class="hasAnchor">
<a href="#filtering-by-degree" class="anchor"></a>Filtering by degree</h1>
<div id="creating-a-degree-filter" class="section level2">
<h2 class="hasAnchor">
<a href="#creating-a-degree-filter" class="anchor"></a>Creating a degree filter</h2>
<p>Every node in a network has a Degree property, which corresponds to the number of edges connecting the node to other nodes, either as a target or source. Filtering based on node degree is a useful way to remove nodes with too few (or too many) connections.</p>
<p>In this example we want to exclude low degree nodes, e.g., those with only 0, 1 or 2 connections:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw"><a href="../reference/createDegreeFilter.html">createDegreeFilter</a></span>(<span class="st">'degree filter'</span>, <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">0</span>,<span class="dv">2</span>), <span class="st">'IS_NOT_BETWEEN'</span>)</a></code></pre></div>
<p>At the bottom of the Select tab, you can see how many edges/nodes where selected.</p>
</div>
<div id="creating-a-subnetwork-from-a-selection" class="section level2">
<h2 class="hasAnchor">
<a href="#creating-a-subnetwork-from-a-selection" class="anchor"></a>Creating a subnetwork from a selection</h2>
<p>We can now create a new network, or subnetwork, from our selected set of nodes and all relevant edges:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw"><a href="../reference/createSubnetwork.html">createSubnetwork</a></span>(<span class="dt">subnetwork.name =</span><span class="st">'Breast cancer: highly connected nodes'</span>)</a></code></pre></div>
</div>
</div>
<div id="filtering-by-attribute" class="section level1">
<h1 class="hasAnchor">
<a href="#filtering-by-attribute" class="anchor"></a>Filtering by attribute</h1>
<div id="creating-a-column-filter" class="section level2">
<h2 class="hasAnchor">
<a href="#creating-a-column-filter" class="anchor"></a>Creating a column filter</h2>
<p>We could also filter the network based on high disease score. The disease score comes from STRING and indicates the strength of the association to the disease queried.</p>
<p>Let’s select nodes from the original network with a disease score of greater than 4 (on a scale of 1-5):</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw"><a href="../reference/createColumnFilter.html">createColumnFilter</a></span>(<span class="dt">filter.name=</span><span class="st">'disease score filter'</span>, <span class="dt">column=</span><span class="st">'stringdb::disease score'</span>, <span class="dv">4</span>, <span class="st">'GREATER_THAN'</span>, <span class="dt">network =</span> string.net)</a></code></pre></div>
<p>Again, we can create a subnetwork from the selection:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="kw"><a href="../reference/createSubnetwork.html">createSubnetwork</a></span>(<span class="dt">subnetwork.name =</span><span class="st">'Breast cancer: high disease score'</span>)</a></code></pre></div>
</div>
</div>
<div id="combining-filters" class="section level1">
<h1 class="hasAnchor">
<a href="#combining-filters" class="anchor"></a>Combining filters</h1>
<p>But what if we want to combine these two filters? You could apply them sequentially as individual filters, but then you’d need to be careful about the order in which you apply the filters. Alternatively, you can create a composite filter and apply the logic all at once!</p>
<p>Let’s combine the two filters “degree filter” and “disease score” to produce one filter, then apply it to the original network and create a final subnetwork:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="kw"><a href="../reference/createCompositeFilter.html">createCompositeFilter</a></span>(<span class="st">'combined filter'</span>, <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">'degree filter'</span>,<span class="st">'disease score filter'</span>), <span class="dt">network =</span> string.net)</a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="kw"><a href="../reference/createSubnetwork.html">createSubnetwork</a></span>(<span class="dt">subnetwork.name =</span><span class="st">'final subnetwork'</span>)</a></code></pre></div>
<p>We can apply a layout to help with interpreting the network:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="kw"><a href="../reference/layoutNetwork.html">layoutNetwork</a></span>(<span class="st">'force-directed defaultSpringCoefficient=5E-6'</span>)</a></code></pre></div>
<p>This final network obviously contains fewer nodes than the original, but they are the most connected and most highly associated with the disease. If you examine the network you can see several well-known breast cancer oncogenes, for example BRCA1, TP53 and PTEN, near the center of the action.</p>
</div>
<div id="hiding-filtered-nodes" class="section level1">
<h1 class="hasAnchor">
<a href="#hiding-filtered-nodes" class="anchor"></a>Hiding filtered nodes</h1>
<p>As a final example of the filter functions, let’s return to the orignal network once more and apply our “combined filter”. But this time let’s <em>hide</em> the filtered out nodes, rather than forming a selection. This demonstrates the <em>applyFilter</em> function and the <em>hide</em> parameter that is optional for all <em>createXXXFilter</em> functions as well.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="kw"><a href="../reference/applyFilter.html">applyFilter</a></span>(<span class="st">'combined filter'</span>, <span class="dt">hide=</span><span class="ot">TRUE</span>, <span class="dt">network =</span> string.net)</a></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#installation">Installation</a></li>
      <li><a href="#prerequisites">Prerequisites</a></li>
      <li><a href="#get-network-from-string">Get network from STRING</a></li>
      <li>
<a href="#filtering-by-degree">Filtering by degree</a><ul class="nav nav-pills nav-stacked">
<li><a href="#creating-a-degree-filter">Creating a degree filter</a></li>
      <li><a href="#creating-a-subnetwork-from-a-selection">Creating a subnetwork from a selection</a></li>
      </ul>
</li>
      <li>
<a href="#filtering-by-attribute">Filtering by attribute</a><ul class="nav nav-pills nav-stacked">
<li><a href="#creating-a-column-filter">Creating a column filter</a></li>
      </ul>
</li>
      <li><a href="#combining-filters">Combining filters</a></li>
      <li><a href="#hiding-filtered-nodes">Hiding filtered nodes</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Alex Pico, Tanja Muetze, Paul Shannon.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
